<html>

  <head>

    <script>
      function get_decimal(n) {
          var d = 0;
          for ( var  i = 0; i< 100; i++ ) {
              d = Math.random();
              var s = Math.round(Math.random() * 2);
              var f = Math.pow(10,s);
              d = d * f;
              f = Math.pow(10,n);
              d = Math.round(d * f) / f;
              var str = d.toFixed(n);
              if ( str.charAt(str.length-1) != '0' )
      	          break;
          }
          return d;
      }
      function gen() {
          var tbody = document.getElementById('tbMain');
          // 2位小数乘1位小数，或2位乘2位
          for ( var i=0; i < 10; i++ ) {
              var a = get_decimal(2);
              var n = 1 + Math.round(Math.random());
              var b = get_decimal(n);
              var str = '(' + (i+1) + ') ' + a + '&times;' + b + ' = __________';
              var td = tbody.rows[i].cells[0];
              td.innerHTML = str;
          }
          // 三位小数加三位小数
          for ( var i=0; i < 10; i++ ) {
              var str = '(' + (i+11) + ') ' + get_decimal(3) + '+' + get_decimal(3) + '=__________';
              var td = tbody.rows[i].cells[1];
              td.innerHTML = str;
          }
          // 三位小数减三位小数
          for ( var i=0; i < 10; i++ ) {
              var a = get_decimal(3);
              var b = get_decimal(3);
              if (a < b) {
                  var c = a;
                  a = b;
                  b = c;
              }
              var str = '(' + (i+21) + ') ' + a + '-' + b + '=__________';
              var td = tbody.rows[i].cells[2];
              td.innerHTML = str;
          }
      };
    </script>
    
  </head>

  <body body onload="gen()">

    <H1>自动生成计算题</H1>
    <p>小学4年级下，1位小数与2位小数的乘法、三位小数的加减法</p>
    <table width="900" height="600" border="0" cellspacing="0"> 
      <thead> 
	<tr> 
	  <th>乘法</th> 
	  <th>加法</th> 
	  <th>减法</th> 
	</tr>  
      </thead> 
      <tbody id="tbMain">
	<tr><td> (1)</td><td>(11)</td><td>(21)</td></tr>
	<tr><td> (2)</td><td>(12)</td><td>(22)</td></tr>
	<tr><td> (3)</td><td>(13)</td><td>(23)</td></tr>
	<tr><td> (4)</td><td>(14)</td><td>(24)</td></tr>
	<tr><td> (5)</td><td>(15)</td><td>(25)</td></tr>
	<tr><td> (6)</td><td>(16)</td><td>(26)</td></tr>
	<tr><td> (7)</td><td>(17)</td><td>(27)</td></tr>
	<tr><td> (8)</td><td>(18)</td><td>(28)</td></tr>
	<tr><td> (9)</td><td>(19)</td><td>(29)</td></tr>
	<tr><td>(10)</td><td>(20)</td><td>(30)</td></tr>
      </tbody> 
    </table>
    <button type="button" onclick="gen()">换一批</button>
    
  </body>

</html>
